{"remainingRequest":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\src\\views\\admin\\Orders.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\src\\views\\admin\\Orders.vue","mtime":1596365197706},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g6LyJ5YWlIFBhZ2luYXRpb24g5YiG6aCBIGNvbXBvbmVudHMKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24udnVlJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdPcmRlcnMnLAogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2luYXRpb246IFBhZ2luYXRpb24KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcmRlcnM6IHt9LAogICAgICBwYWdpbmF0aW9uOiB7fSwKICAgICAgaXNMb2FkaW5nOiBmYWxzZQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldE9yZGVycygpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0T3JkZXJzOiBmdW5jdGlvbiBnZXRPcmRlcnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGFnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTsKICAgICAgdmFyIHBhZ2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiA4OwogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWU7CiAgICAgIHZhciBhcGkgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUQsICIvYWRtaW4vZWMvb3JkZXJzP3BhZ2U9IikuY29uY2F0KHBhZ2UsICImcGFnZWQ9IikuY29uY2F0KHBhZ2VkKTsgLy8gICBjb25zdCBwYXJhbXMgPSB7CiAgICAgIC8vICAgICAncGFnZSc6ICcxJywKICAgICAgLy8gICAgICdwYWdlZCc6ICcyNScsCiAgICAgIC8vICAgICAnb3JkZXJCeSc6ICdjcmVhdGVkX2F0LCB1cGRhdGVkX2F0JywKICAgICAgLy8gICAgICdzb3J0JzogJ2Rlc2MsIGFzYycKICAgICAgLy8gICB9CiAgICAgIC8vICAgT2JqZWN0LmtleXMocGFyYW1zKQogICAgICAvLyAgICAgLmZvckVhY2goa2V5ID0+IGFwaS5zZWFyY2hQYXJhbXMuYXBwZW5kKGtleSwgcGFyYW1zW2tleV0pKQoKICAgICAgdGhpcy4kaHR0cC5nZXQoYXBpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLm9yZGVycyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICBfdGhpcy5wYWdpbmF0aW9uID0gcmVzcG9uc2UuZGF0YS5tZXRhLnBhZ2luYXRpb247IC8vIGNvbnNvbGUubG9nKHRoaXMub3JkZXJzKQoKICAgICAgICBfdGhpcy5pc0xvYWRpbmcgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9LAogICAgc2V0T3JkZXJQYWlkOiBmdW5jdGlvbiBzZXRPcmRlclBhaWQoaXRlbSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciBhcGkgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRILCAiLyIpLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUQsICIvYWRtaW4vZWMvb3JkZXJzLyIpLmNvbmNhdChpdGVtLmlkLCAiL3BhaWQiKTsKCiAgICAgIGlmICghaXRlbS5wYWlkKSB7CiAgICAgICAgYXBpID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgIi8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlELCAiL2FkbWluL2VjL29yZGVycy8iKS5jb25jYXQoaXRlbS5pZCwgIi91bnBhaWQiKTsKICAgICAgfQoKICAgICAgdGhpcy4kaHR0cC5wYXRjaChhcGksIGl0ZW0uaWQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2coJ+W3suS7mOasvicpOwoKICAgICAgICBfdGhpczIuZ2V0T3JkZXJzKCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["Orders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA;AACA,OAAA,UAAA,MAAA,6BAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,QADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,MAAA,EAAA,EADA;AAEA,MAAA,UAAA,EAAA,EAFA;AAGA,MAAA,SAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAZA,qBAYA;AACA,SAAA,SAAA;AACA,GAdA;AAeA,EAAA,OAAA,EAAA;AACA,IAAA,SADA,uBACA;AAAA;;AAAA,UAAA,IAAA,uEAAA,CAAA;AAAA,UAAA,KAAA,uEAAA,CAAA;AACA,WAAA,SAAA,GAAA,IAAA;AACA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,cAAA,OAAA,CAAA,GAAA,CAAA,YAAA,mCAAA,IAAA,oBAAA,KAAA,CAAA,CAFA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,GAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA,CAAA,UAAA,CAFA,CAGA;;AACA,QAAA,KAAA,CAAA,SAAA,GAAA,KAAA;AACA,OALA;AAMA,KAlBA;AAmBA,IAAA,YAnBA,wBAmBA,IAnBA,EAmBA;AAAA;;AACA,UAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,cAAA,OAAA,CAAA,GAAA,CAAA,YAAA,8BAAA,IAAA,CAAA,EAAA,UAAA;;AACA,UAAA,CAAA,IAAA,CAAA,IAAA,EAAA;AACA,QAAA,GAAA,aAAA,OAAA,CAAA,GAAA,CAAA,eAAA,cAAA,OAAA,CAAA,GAAA,CAAA,YAAA,8BAAA,IAAA,CAAA,EAAA,YAAA;AACA;;AACA,WAAA,KAAA,CAAA,KAAA,CAAA,GAAA,EAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,KAAA;;AACA,QAAA,MAAA,CAAA,SAAA;AACA,OAHA;AAIA;AA5BA;AAfA,CAAA","sourcesContent":["<template>\r\n    <div>\r\n        <loading :active.sync=\"isLoading\"></loading>\r\n        <table class=\"table\">\r\n            <thead>\r\n                <tr>\r\n                    <th>下單時間</th>\r\n                    <th>購買款項</th>\r\n                    <th>付款方式</th>\r\n                    <th>應付金額</th>\r\n                    <th>是否付款</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody v-if = \"orders.length\">\r\n                <tr v-for=\"(item, index) in orders\"\r\n                    :key=\"index\"\r\n                    :class=\"{'text-danger': !item.paid}\"\r\n                    >\r\n                    <td>{{ item.created.datetime }}</td>\r\n                    <td>\r\n                        <ul class=\"list-unstyled\">\r\n                            <li v-for=\"(product, index) in item.products\"\r\n                            :key=\"index\"\r\n                            >\r\n                                {{ product.product.title}} 數量 : {{ product.quantity }} {{ product.product.unit }}\r\n                            </li>\r\n                        </ul>\r\n                    </td>\r\n                    <td>{{ item.payment }}</td>\r\n                    <td>{{ item.amount | money }}</td>\r\n                    <td>\r\n                        <div class=\"custom-control custom-switch\">\r\n                            <input\r\n                                :id=\"item.id\"\r\n                                v-model=\"item.paid\"\r\n                                type=\"checkbox\"\r\n                                class=\"custom-control-input\"\r\n                                @change=\"setOrderPaid(item)\"\r\n                            >\r\n                            <label\r\n                                class=\"custom-control-label\"\r\n                                :for=\"item.id\"\r\n                            >\r\n                                <strong\r\n                                v-if=\"item.paid\"\r\n                                class=\"text-success\"\r\n                                >已付款</strong>\r\n                                <span\r\n                                v-else\r\n                                class=\"text-muted\"\r\n                                >尚未付款</span>\r\n                            </label>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n         <!-- 分頁元件 :pages 取得外層 pagination 頁面資訊 ; @emit-pages 刷新頁面-->\r\n        <div class=\"d-flex justify-content-center\">\r\n          <Pagination :pages=\"pagination\" @emit-pages=\"getOrders\"></Pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 載入 Pagination 分頁 components\r\nimport Pagination from '@/components/Pagination.vue'\r\nexport default {\r\n  name: 'Orders',\r\n  components: {\r\n    Pagination\r\n  },\r\n  data () {\r\n    return {\r\n      orders: {},\r\n      pagination: {},\r\n      isLoading: false\r\n    }\r\n  },\r\n  created () {\r\n    this.getOrders()\r\n  },\r\n  methods: {\r\n    getOrders (page = 1, paged = 8) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/orders?page=${page}&paged=${paged}`\r\n      //   const params = {\r\n      //     'page': '1',\r\n      //     'paged': '25',\r\n      //     'orderBy': 'created_at, updated_at',\r\n      //     'sort': 'desc, asc'\r\n      //   }\r\n      //   Object.keys(params)\r\n      //     .forEach(key => api.searchParams.append(key, params[key]))\r\n      this.$http.get(api).then((response) => {\r\n        this.orders = response.data.data\r\n        this.pagination = response.data.meta.pagination\r\n        // console.log(this.orders)\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    setOrderPaid (item) {\r\n      let api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/orders/${item.id}/paid`\r\n      if (!item.paid) {\r\n        api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/orders/${item.id}/unpaid`\r\n      }\r\n      this.$http.patch(api, item.id).then((response) => {\r\n        console.log('已付款')\r\n        this.getOrders()\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/admin"}]}