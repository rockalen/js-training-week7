{"remainingRequest":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\src\\views\\admin\\Products.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\src\\views\\admin\\Products.vue","mtime":1595859553676},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8g6LyJ5YWlIFBhZ2luYXRpb24g5YiG6aCBIGNvbXBvbmVudHMKaW1wb3J0IFBhZ2luYXRpb24gZnJvbSAnQC9jb21wb25lbnRzL1BhZ2luYXRpb24udnVlJzsgLy8g6LyJ5YWlUHJvZHVjdE1vZGFsIGNvbXBvbmVudHMKCmltcG9ydCBQcm9kdWN0TW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL1Byb2R1Y3RNb2RhbC52dWUnOyAvLyBpbXBvcnQgJCBmcm9tICdqcXVlcnknIC8vIFNURVAgMe+8mui8ieWFpSBqUXVlcnkKCmltcG9ydCBEZWxQcm9kdWN0TW9kYWwgZnJvbSAnQC9jb21wb25lbnRzL0RlbFByb2R1Y3RNb2RhbC52dWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1Byb2R1Y3RzJywKICBjb21wb25lbnRzOiB7CiAgICBQYWdpbmF0aW9uOiBQYWdpbmF0aW9uLAogICAgUHJvZHVjdE1vZGFsOiBQcm9kdWN0TW9kYWwsCiAgICBEZWxQcm9kdWN0TW9kYWw6IERlbFByb2R1Y3RNb2RhbAogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIHByb2R1Y3RzOiBbXSwKICAgICAgcGFnaW5hdGlvbjoge30sCiAgICAgIHRlbXBQcm9kdWN0OiB7CiAgICAgICAgaW1hZ2VVcmw6IFtdLAogICAgICAgIG9wdGlvbnM6IHt9CiAgICAgIH0sCiAgICAgIGlzTmV3OiB0cnVlLAogICAgICBzdGF0dXM6IHsKICAgICAgICBmaWxlVXBsb2FkaW5nOiBmYWxzZQogICAgICB9LAogICAgICBsb2FkaW5nQnRuOiAnJwogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldFByb2R1Y3RzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRQcm9kdWN0czogZnVuY3Rpb24gZ2V0UHJvZHVjdHMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgcGFnZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogMTsKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwogICAgICB2YXIgYXBpID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSCwgIi8iKS5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlELCAiL2FkbWluL2VjL3Byb2R1Y3RzP3BhZ2U9IikuY29uY2F0KHBhZ2UpOyAvLyBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9lYy9wcm9kdWN0c2AKICAgICAgLy8gY29uc29sZS5sb2coYXBpKQoKICAgICAgdGhpcy5heGlvcy5nZXQoYXBpKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLnByb2R1Y3RzID0gcmVzcG9uc2UuZGF0YS5kYXRhOyAvLyDlsIfpgaDnq6/poIHmlbjlm57mh4nos4fmlpnlrZjlhaXnlKLlk4HpoIHmlbjos4fmlpnkuKbntaYgcGFnaW5hdGlvbiDlhYPku7blgZrlvoznuozomZXnkIYKCiAgICAgICAgX3RoaXMucGFnaW5hdGlvbiA9IHJlc3BvbnNlLmRhdGEubWV0YS5wYWdpbmF0aW9uOwogICAgICAgIF90aGlzLmlzTG9hZGluZyA9IGZhbHNlOyAvLyBjb25zb2xlLmxvZyh0aGlzLnByb2R1Y3RzKQogICAgICB9KTsKICAgIH0sCiAgICBvcGVuTW9kYWw6IGZ1bmN0aW9uIG9wZW5Nb2RhbChhY3QsIGl0ZW0pIHsKICAgICAgc3dpdGNoIChhY3QpIHsKICAgICAgICBjYXNlICduZXcnOgogICAgICAgICAgLy8g5L2/55SoIHJlZnMg6Ke455m85a2Q5YWD5Lu25riF56m6CiAgICAgICAgICB0aGlzLiRyZWZzLnByb2R1Y3RNb2RlbC50ZW1wUHJvZHVjdCA9IHsKICAgICAgICAgICAgaW1hZ2VVcmw6IFtdLAogICAgICAgICAgICBvcHRpb25zOiB7fSAvLyDoh6rooYzmlrDlop7nm7jpl5zmrITkvY3kuqbkuIDkvbXmuIXnqboKCiAgICAgICAgICB9OyAvLyAyMDIwMDfmlLnmiJDmqKHntYTlhafpgI/pgY4gaXNOZXcg5L6G5Yik5pa3IDpjbGFzcyDvvIzovIPngrrnsKHmvZQKICAgICAgICAgIC8vIHRoaXMubW9kYWxDbGFzc1snYmctcHJpbWFyeSddID0gdHJ1ZTsKICAgICAgICAgIC8vIHRoaXMubW9kYWxDbGFzc1snYmctc3VjY2VzcyddID0gZmFsc2U7CgogICAgICAgICAgdGhpcy5pc05ldyA9IHRydWU7CiAgICAgICAgICB3aW5kb3cuJCgnI3Byb2R1Y3RNb2RhbCcpLm1vZGFsKCdzaG93Jyk7IC8vICAgdGhpcy4kcmVmc1sncHJvZHVjdC1Nb2RlbCddLnNob3coKQoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdlZGl0JzoKICAgICAgICAgIC8vIDIwMjAwN+aUueaIkOaooee1hOWFp+mAj+mBjiBpc05ldyDkvobliKTmlrcgOmNsYXNzIO+8jOi8g+eCuuewoea9lAogICAgICAgICAgLy8gdGhpcy5tb2RhbENsYXNzWydiZy1wcmltYXJ5J10gPSBmYWxzZTsKICAgICAgICAgIC8vIHRoaXMubW9kYWxDbGFzc1snYmctc3VjY2VzcyddID0gdHJ1ZTsKICAgICAgICAgIC8vIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgICAgIHRoaXMubG9hZGluZ0J0biA9IHRoaXMudGVtcFByb2R1Y3QuaWQ7CiAgICAgICAgICB0aGlzLmlzTmV3ID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnRlbXBQcm9kdWN0ID0gT2JqZWN0LmFzc2lnbih7fSwgaXRlbSk7IC8vIHRoaXMudGVtcFByb2R1Y3QgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGl0ZW0pKTsKICAgICAgICAgIC8vIOS9v+eUqCByZWZzIOinuOeZvOWtkOWFg+S7tmdldFByb2R1Y3Tmlrnms5UKCiAgICAgICAgICB0aGlzLiRyZWZzLnByb2R1Y3RNb2RlbC5nZXRQcm9kdWN0KHRoaXMudGVtcFByb2R1Y3QuaWQpOyAvLyBjb25zb2xlLmxvZyh0aGlzLnRlbXBQcm9kdWN0LmlkKQoKICAgICAgICAgIHdpbmRvdy4kKCcjcHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKTsKICAgICAgICAgIHRoaXMubG9hZGluZ0J0biA9ICcnOyAvLyB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwoKICAgICAgICAgIGJyZWFrOwoKICAgICAgICBjYXNlICdkZWxldGUnOgogICAgICAgICAgdGhpcy50ZW1wUHJvZHVjdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaXRlbSkpOwogICAgICAgICAgd2luZG93LiQoJyNkZWxQcm9kdWN0TW9kYWwnKS5tb2RhbCgnc2hvdycpOwogICAgICAgICAgYnJlYWs7CgogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIC8vIOioreWumueUouWTgeWVn+eUqOWHveW8jwogICAgc2V0UHJvZHVjdEVuYWJsZWQ6IGZ1bmN0aW9uIHNldFByb2R1Y3RFbmFibGVkKGl0ZW0pIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmdCdG4gPSBpdGVtLmlkOyAvLyAxLua3seWxpOikh+ijveWWruethueUouWTgeizh+aWmeiHs+aaq+WtmCB0ZW1wUHJvZHVjdAoKICAgICAgdGhpcy50ZW1wUHJvZHVjdCA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoaXRlbSkpOyAvLyAyLuioreWumkFQSeS9jee9rgoKICAgICAgdmFyIGFwaSA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEgsICIvIikuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfVVVJRCwgIi9hZG1pbi9lYy9wcm9kdWN0LyIpLmNvbmNhdCh0aGlzLnRlbXBQcm9kdWN0LmlkKTsgLy8gMy7oqK3lrprmmK/lkKbkuIrmnrbvvIzlpoLmnpzlt7LkuIrmnrbvvIzoqK3lrprngrrkuIvmnrbvvIzlj43kuYvoqK3lrprngrrkuIrmnrYKCiAgICAgIGlmICh0aGlzLnRlbXBQcm9kdWN0LmVuYWJsZWQpIHsKICAgICAgICB0aGlzLnRlbXBQcm9kdWN0LmVuYWJsZWQgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRlbXBQcm9kdWN0LmVuYWJsZWQgPSB0cnVlOwogICAgICB9IC8vIDQu5L2/55SoIGF4aW9zLnBhdGNoIEFQSSDpnZ7lkIzmraXmm7TmlrDpgaDnq6/os4fmlpkKCgogICAgICB0aGlzLmF4aW9zLnBhdGNoKGFwaSwgdGhpcy50ZW1wUHJvZHVjdCkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgX3RoaXMyLmxvYWRpbmdCdG4gPSAnJzsgLy8gNS7mm7TmlrDlrozmiJDlvozljbPliLfmlrDnlKLlk4HliJfooagKCiAgICAgICAgX3RoaXMyLmdldFByb2R1Y3RzKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Products.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"products\">\r\n        <div class=\"text-right mt-3\">\r\n                <button @click=\"openModal('new')\" class=\"btn btn-outline-primary\">\r\n                <!-- <i class=\"material-icons align-middle\">add_circle </i> -->\r\n                <font-awesome-icon icon=\"plus-square\"/>\r\n                <span class=\"align-middle\"> 新增產品</span>\r\n            </button>\r\n        </div>\r\n        <table class=\"table mt-4\">\r\n            <thead>\r\n                <tr>\r\n                    <th width=\"150\">分類</th>\r\n                    <th>產品名稱</th>\r\n                    <th width=\"120\">原價</th>\r\n                    <th width=\"100\">售價</th>\r\n                    <th width=\"120\">是否上架</th>\r\n                    <th width=\"120\">編輯 / 刪除</th>\r\n                </tr>\r\n            </thead>\r\n            <!-- 列出產品 -->\r\n            <tbody>\r\n                <tr v-for=\"(item) in products\" :key=\"item.id\">\r\n                    <td>{{ item.category }}</td>\r\n                    <td>{{ item.title }}</td>\r\n                    <td>{{ item.origin_price | money }}</td>\r\n                    <td>{{ item.price | money }}</td>\r\n                    <td>\r\n                        <span v-if=\"item.enabled\" class=\"text-success d-flex align-items-center justify-content-center\">\r\n                            <a @click=\"setProductEnabled(item)\" class=\"btn text-success p-0\" href=\"#\" role=\"button\" :class=\"{'disabled':loadingBtn === item.id}\">\r\n                                <!-- <i class=\"material-icons font-size-36\">toggle_on </i> -->\r\n                                <font-awesome-icon icon=\"toggle-off\"/>\r\n                                <sup v-if='loadingBtn === item.id' class=\"spinner-grow spinner-grow-sm text-success\" role=\"status\">\r\n                                </sup>\r\n                                <sup v-else > on</sup>\r\n                            </a>\r\n                        </span>\r\n                        <span v-else class=\"text-danger d-flex align-items-center justify-content-center\">\r\n                            <a @click=\"setProductEnabled(item)\" class=\"btn text-danger p-0\" href=\"#\" role=\"button\" :class=\"{'disabled':loadingBtn === item.id}\">\r\n                                <!-- <i class=\"material-icons font-size-36\">toggle_off </i> -->\r\n                                <font-awesome-icon icon=\"toggle-on\"/>\r\n                                <sub v-if='loadingBtn === item.id' class=\"spinner-grow spinner-grow-sm text-danger\" role=\"status\"></sub>\r\n                                <sub v-else > off</sub>\r\n                            </a>\r\n                        </span>\r\n                    </td>\r\n                    <td>\r\n                        <!-- 修改即刪除按鈕，使用v-on:click @click -->\r\n                        <div class=\"btn-group\">\r\n                            <button v-on:click=\"openModal('edit', item)\" class=\"btn btn-outline-success py-1\">\r\n                                <!-- <i class=\"material-icons align-middle\">edit</i> -->\r\n                                <font-awesome-icon icon=\"edit\"/>\r\n                            </button>\r\n                            <button @click=\"openModal('delete', item)\" class=\"btn btn-outline-danger py-1\">\r\n                                <!-- <i class=\"material-icons align-middle\">delete_forever</i> -->\r\n                                <font-awesome-icon icon=\"trash-alt\"/>\r\n                            </button>\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n        <!-- 分頁元件 :pages 取得外層 pagination 頁面資訊 ; @emit-pages 刷新頁面-->\r\n        <Pagination :pages=\"pagination\" @emit-pages=\"getProducts\"></Pagination>\r\n         <!-- Modal -->\r\n        <product-modal ref=\"productModel\" :status=\"status\" :is-new=\"isNew\" @update=\"getProducts\">\r\n        </product-modal>\r\n        <!-- props tempProduct id,title user ; @update 呼叫getProducts-->\r\n        <del-product-modal :temp-product=\"tempProduct\"  @update=\"getProducts\"></del-product-modal>\r\n        <!-- Vue Loading Overlay Component -->\r\n        <loading :active.sync=\"isLoading\"></loading>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n// 載入 Pagination 分頁 components\r\nimport Pagination from '@/components/Pagination.vue'\r\n// 載入ProductModal components\r\nimport ProductModal from '@/components/ProductModal.vue'\r\n// import $ from 'jquery' // STEP 1：載入 jQuery\r\nimport DelProductModal from '@/components/DelProductModal.vue'\r\nexport default {\r\n  name: 'Products',\r\n  components: {\r\n    Pagination,\r\n    ProductModal,\r\n    DelProductModal\r\n  },\r\n  data () {\r\n    return {\r\n      isLoading: false,\r\n      products: [],\r\n      pagination: {},\r\n      tempProduct: {\r\n        imageUrl: [],\r\n        options: {}\r\n      },\r\n      isNew: true,\r\n      status: {\r\n        fileUploading: false\r\n      },\r\n      loadingBtn: ''\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n  },\r\n  methods: {\r\n    getProducts (page = 1) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/products?page=${page}`\r\n      // const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/products`\r\n      // console.log(api)\r\n      this.axios.get(api).then((response) => {\r\n        this.products = response.data.data\r\n        // 將遠端頁數回應資料存入產品頁數資料並給 pagination 元件做後續處理\r\n        this.pagination = response.data.meta.pagination\r\n        this.isLoading = false\r\n        // console.log(this.products)\r\n      })\r\n    },\r\n    openModal (act, item) {\r\n      switch (act) {\r\n        case 'new':\r\n          // 使用 refs 觸發子元件清空\r\n          this.$refs.productModel.tempProduct = {\r\n            imageUrl: [],\r\n            options: {} // 自行新增相關欄位亦一併清空\r\n          }\r\n          // 202007改成模組內透過 isNew 來判斷 :class ，較為簡潔\r\n          // this.modalClass['bg-primary'] = true;\r\n          // this.modalClass['bg-success'] = false;\r\n          this.isNew = true\r\n          window.$('#productModal').modal('show')\r\n          //   this.$refs['product-Model'].show()\r\n          break\r\n        case 'edit':\r\n          // 202007改成模組內透過 isNew 來判斷 :class ，較為簡潔\r\n          // this.modalClass['bg-primary'] = false;\r\n          // this.modalClass['bg-success'] = true;\r\n          // this.isLoading = true;\r\n          this.loadingBtn = this.tempProduct.id\r\n          this.isNew = false\r\n          this.tempProduct = Object.assign({}, item)\r\n          // this.tempProduct = JSON.parse(JSON.stringify(item));\r\n          // 使用 refs 觸發子元件getProduct方法\r\n          this.$refs.productModel.getProduct(this.tempProduct.id)\r\n          // console.log(this.tempProduct.id)\r\n          window.$('#productModal').modal('show')\r\n          this.loadingBtn = ''\r\n          // this.isLoading = false;\r\n          break\r\n        case 'delete':\r\n          this.tempProduct = JSON.parse(JSON.stringify(item))\r\n          window.$('#delProductModal').modal('show')\r\n          break\r\n        default:\r\n          break\r\n      }\r\n    },\r\n    // 設定產品啟用函式\r\n    setProductEnabled (item) {\r\n      this.loadingBtn = item.id\r\n      // 1.深層複製單筆產品資料至暫存 tempProduct\r\n      this.tempProduct = JSON.parse(JSON.stringify(item))\r\n      // 2.設定API位置\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/product/${this.tempProduct.id}`\r\n      // 3.設定是否上架，如果已上架，設定為下架，反之設定為上架\r\n      if (this.tempProduct.enabled) {\r\n        this.tempProduct.enabled = false\r\n      } else {\r\n        this.tempProduct.enabled = true\r\n      }\r\n      // 4.使用 axios.patch API 非同步更新遠端資料\r\n      this.axios.patch(api, this.tempProduct).then(() => {\r\n        this.loadingBtn = ''\r\n        // 5.更新完成後即刷新產品列表\r\n        this.getProducts()\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"],"sourceRoot":"src/views/admin"}]}