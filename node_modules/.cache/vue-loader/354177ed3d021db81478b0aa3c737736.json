{"remainingRequest":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\src\\components\\ProductModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\src\\components\\ProductModal.vue","mtime":1595821718028},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICcnLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGVtcFByb2R1Y3Q6IHsNCiAgICAgICAgaW1hZ2VVcmw6IFtdLA0KICAgICAgICBvcHRpb25zOiB7fQ0KICAgICAgfSwNCiAgICAgIGlzTG9hZGluZzogZmFsc2UNCiAgICB9DQogIH0sDQogIHByb3BzOiB7DQogICAgcHJvZHVjdGlkOiB7DQogICAgICB0eXBlOiBTdHJpbmcsDQogICAgICBkZWZhdWx0OiAnJw0KICAgIH0sDQogICAgc3RhdHVzOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0ICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNOZXc6IHsNCiAgICAgIHR5cGU6IEJvb2xlYW4sDQogICAgICBkZWZhdWx0OiB0cnVlDQogICAgfSwNCiAgICB1c2VyOiB7DQogICAgICB0eXBlOiBPYmplY3QsDQogICAgICBkZWZhdWx0ICgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOaKk+WPluWAi+WIpeeUouWTgeizh+aWmeWHveaVuA0KICAgIGdldFByb2R1Y3QgKGlkKSB7DQogICAgICAvLyDpgaDnq6/lrZjlj5ZMb2FkaW5n55Wr6Z2i5omT6ZaLDQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUNCiAgICAgIC8vIOioreWumiBBUEkg6YGg56uv6YCj57ea5a2X5LiyDQogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9hZG1pbi9lYy9wcm9kdWN0LyR7aWR9YA0KICAgICAgdGhpcy5heGlvcy5nZXQoYXBpKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgLy8gd2luZG93LiQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnc2hvdycpDQogICAgICAgIC8vIOmAj+mBjiBheGlvcyBBUEkg5Y+W5Zue6YGg56uv55Si5ZOB6LOH5paZDQogICAgICAgIHRoaXMudGVtcFByb2R1Y3QgPSByZXMuZGF0YS5kYXRhDQogICAgICAgIC8vIOmBoOerr+WtmOWPlkxvYWRpbmfnlavpnaLpl5zplokNCiAgICAgICAgdGhpcy5pc0xvYWRpbmcgPSBmYWxzZQ0KICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOaWsOWinuOAgeabtOaWsOWAi+WIpeeUouWTgeWHveaVuA0KICAgIHVwZGF0ZVByb2R1Y3QgKCkgew0KICAgICAgLy8g5a6a576p6KaB5pu05paw55qEQVBJ77yM5aaC5p6c5paw5aKe77yM5YmHaHR0cE1ldGhvZOaTjeS9nOeCunBvc3TvvIznt6jovK/ngrpwYXRjaA0KICAgICAgY29uc3QgYXBpVXJsID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVVJRH1gDQogICAgICBsZXQgYXBpID0gYCR7YXBpVXJsfS9hZG1pbi9lYy9wcm9kdWN0YA0KICAgICAgLy8g5rOo5oSPaHR0cE1ldGhvZOimgeWwj+Wvqw0KICAgICAgbGV0IGh0dHBNZXRob2QgPSAncG9zdCcNCiAgICAgIC8vIOioreWumuabtOaWsOeUouWTgWFwaei3r+W+kQ0KICAgICAgaWYgKCF0aGlzLmlzTmV3KSB7DQogICAgICAgIGFwaSA9IGAke2FwaVVybH0vYWRtaW4vZWMvcHJvZHVjdC8ke3RoaXMudGVtcFByb2R1Y3QuaWR9YA0KICAgICAgICBodHRwTWV0aG9kID0gJ3BhdGNoJw0KICAgICAgfQ0KICAgICAgLy8gdG9rZW7lt7LlrprnvqnlnKhjcmVhdGVk5pmC5pyfDQogICAgICAvLyBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vbi5BdXRob3JpemF0aW9uID0gYEJlYXJlciAke3RoaXMudXNlci50b2tlbn1gOw0KICAgICAgLy8gYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0F1dGhvcml6YXRpb24nXSA9IGBCZWFyZXIgJHt0aGlzLnVzZXIudG9rZW59YDsNCiAgICAgIC8vIOmAj+mBjiBheGlvc1todHRwTWV0aG9kXSDln7fooYxwb3N0IOaIliBwYXRjaCDmk43kvZwNCiAgICAgIHRoaXMuYXhpb3NbaHR0cE1ldGhvZF0oYXBpLCB0aGlzLnRlbXBQcm9kdWN0KS50aGVuKCgpID0+IHsNCiAgICAgICAgd2luZG93LiQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpDQogICAgICAgIC8vIOWRvOWPq+WkluWxpOabtOaWsOeVq+mdog0KICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKQ0KICAgICAgfSkuY2F0Y2goKGVycm9yKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWPg+iAg+evhOS+i+WKoOWFpeS4iuWCs+aqlOahiA0KICAgIHVwbG9hZEZpbGUgKCkgew0KICAgICAgY29uc3QgdXBsb2FkZWRGaWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdDQogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB1cGxvYWRlZEZpbGUpDQogICAgICBjb25zdCB1cmwgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9hZG1pbi9zdG9yYWdlYA0KICAgICAgdGhpcy5zdGF0dXMuZmlsZVVwbG9hZGluZyA9IHRydWUNCiAgICAgIHRoaXMuYXhpb3MucG9zdCh1cmwsIGZvcm1EYXRhLCB7DQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuc3RhdHVzLmZpbGVVcGxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLnRlbXBQcm9kdWN0LmltYWdlVXJsLnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhLnBhdGgpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKCgpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coJ+S4iuWCs+S4jeWPr+i2hemBjiAyIE1CJykNCiAgICAgICAgdGhpcy5zdGF0dXMuZmlsZVVwbG9hZGluZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["ProductModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"productModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n              <div class=\"modal-content\">\r\n                <div :class=\"{'bg-primary': isNew , 'bg-success': !isNew}\" class=\"modal-header text-white\">\r\n                  <h5 v-if=\"isNew\" class=\"modal-title\" id=\"productModalLabel\">新增資料</h5>\r\n                  <h5 v-else class=\"modal-title\" id=\"productModalLabel\">編輯資料</h5>\r\n                  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\" class=\"text-white\">&times;</span>\r\n                  </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-4\">\r\n                                <!-- <div class=\"form-group\">\r\n                                    <label for=\"imageUrl\" class=\"col-form-label\">輸入圖片網址:</label>\r\n                                    <input v-model=\"tempProduct.imageUrl\" type=\"text\" class=\"form-control\" id=\"imageUrl\" placeholder=\"請輸入圖片連結位址\">\r\n                                </div> -->\r\n                                <div v-for=\"i in 5\" :key=\"i + 'img'\" class=\"form-group\">\r\n                                    <label :for=\"'img' + i\">輸入圖片網址</label>\r\n                                    <input :id=\"'img' + i\" v-model=\"tempProduct.imageUrl[i - 1]\" type=\"text\" class=\"form-control\"\r\n                                      placeholder=\"請輸入圖片連結\">\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"customFile\">\r\n                                      或 上傳圖片\r\n                                      <i v-if=\"status.fileUploading\" class=\"fas fa-spinner fa-spin\"></i>\r\n                                    </label>\r\n                                    <input id=\"customFile\" ref=\"file\" type=\"file\" class=\"form-control\" @change=\"uploadFile\">\r\n                                </div>\r\n                                <!-- <img :src=\"tempProduct.imageUrl\" alt=\"\" class=\"image-fluid\"> -->\r\n                                <!-- <div v-if=\"isNew\" class=\"d-none\"></div> -->\r\n                                <div class=\"card\">\r\n                                    <img class=\"card-img-top\" :src=\"tempProduct.imageUrl[0]\" alt>\r\n                                    <div class=\"card-body\">\r\n                                      <p v-if=\"isNew\" class=\"card-text\">輸入圖片網址後立即預覽圖片</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"imgStyle\" class=\"col-form-label\">Image Style:</label>\r\n                                    <input v-model=\"tempProduct.options.imgStyle\" type=\"text\" class=\"form-control\" id=\"imgStyle\" placeholder=\"請輸入圖片樣式(css)\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-8\">\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"title\" class=\"col-form-label\">標題</label>\r\n                                    <input v-model=\"tempProduct.title\" type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"請輸入產品標題\">\r\n                                </div>\r\n                                <div class=\"form-row\">\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"category\" class=\"col-form-label\">類別</label>\r\n                                        <input v-model=\"tempProduct.category\" type=\"text\" class=\"form-control\" id=\"category\" placeholder=\"請輸入類別\">\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"unit\" class=\"col-form-label\">單位</label>\r\n                                        <input v-model=\"tempProduct.unit\" type=\"text\" class=\"form-control\" id=\"unit\" placeholder=\"請輸入單位\">\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-row\">\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"origin_price\" class=\"col-form-label\">原價</label>\r\n                                        <input v-model=\"tempProduct.origin_price\" type=\"number\" class=\"form-control\" id=\"origin_price\" placeholder=\"請輸入原價\">\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"price\" class=\"col-form-label\">售價</label>\r\n                                        <input v-model=\"tempProduct.price\" type=\"number\" class=\"form-control\" id=\"price\" placeholder=\"請輸入售價\">\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"description\" class=\"col-form-label\">產品描述</label>\r\n                                    <textarea v-model=\"tempProduct.description\" class=\"form-control\" id=\"description\" placeholder=\"請輸入產品描述\"></textarea>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"content\" class=\"col-form-label\">產品內容介紹</label>\r\n                                    <textarea v-model=\"tempProduct.content\" class=\"form-control\" id=\"content\" placeholder=\"請輸入產品內容介紹\"></textarea>\r\n                                </div>\r\n                                <div class=\"form-row\">\r\n                                    <div class=\"form-group col-md-4\">\r\n                                        <div class=\"form-check\">\r\n                                            <input id=\"onSale\" v-model=\"tempProduct.options.onSale\" class=\"form-check-input\" type=\"checkbox\"\r\n                                              :true-value=\"true\" :false-value=\"false\">\r\n                                            <label class=\"form-check-label\" for=\"onSale\">是否特價</label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-5\">\r\n                                        <div class=\"form-check\">\r\n                                            <input id=\"is_enabled\" v-model=\"tempProduct.enabled\" class=\"form-check-input\" type=\"checkbox\"\r\n                                              :true-value=\"true\" :false-value=\"false\">\r\n                                            <label class=\"form-check-label\" for=\"is_enabled\">是否上架(顯示於前台)</label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-3\">\r\n                                      <label for=\"order\" class=\"col-form-label\">顯示序號</label>\r\n                                      <input v-model=\"tempProduct.options.order\" class=\"form-control\" type=\"number\" name=\"order\" id=\"order\" placeholder=\"請輸入顯示序號\" >\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\r\n                  <button @click=\"updateProduct()\" type=\"button\" :class=\"{'btn-primary':isNew,'btn-success':!isNew}\" class=\"btn\">確認送出</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n             <!-- Vue Loading Overlay Component -->\r\n        <loading :active.sync=\"isLoading\"></loading>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: '',\r\n  data () {\r\n    return {\r\n      tempProduct: {\r\n        imageUrl: [],\r\n        options: {}\r\n      },\r\n      isLoading: false\r\n    }\r\n  },\r\n  props: {\r\n    productid: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    status: {\r\n      type: Object,\r\n      default () {\r\n        return {\r\n        }\r\n      }\r\n    },\r\n    isNew: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    user: {\r\n      type: Object,\r\n      default () {\r\n        return {\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 抓取個別產品資料函數\r\n    getProduct (id) {\r\n      // 遠端存取Loading畫面打開\r\n      this.isLoading = true\r\n      // 設定 API 遠端連線字串\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/product/${id}`\r\n      this.axios.get(api).then((res) => {\r\n        // window.$('#productModal').modal('show')\r\n        // 透過 axios API 取回遠端產品資料\r\n        this.tempProduct = res.data.data\r\n        // 遠端存取Loading畫面關閉\r\n        this.isLoading = false\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 新增、更新個別產品函數\r\n    updateProduct () {\r\n      // 定義要更新的API，如果新增，則httpMethod操作為post，編輯為patch\r\n      const apiUrl = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}`\r\n      let api = `${apiUrl}/admin/ec/product`\r\n      // 注意httpMethod要小寫\r\n      let httpMethod = 'post'\r\n      // 設定更新產品api路徑\r\n      if (!this.isNew) {\r\n        api = `${apiUrl}/admin/ec/product/${this.tempProduct.id}`\r\n        httpMethod = 'patch'\r\n      }\r\n      // token已定義在created時期\r\n      // axios.defaults.headers.common.Authorization = `Bearer ${this.user.token}`;\r\n      // axios.defaults.headers.common['Authorization'] = `Bearer ${this.user.token}`;\r\n      // 透過 axios[httpMethod] 執行post 或 patch 操作\r\n      this.axios[httpMethod](api, this.tempProduct).then(() => {\r\n        window.$('#productModal').modal('hide')\r\n        // 呼叫外層更新畫面\r\n        this.$emit('update')\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 參考範例加入上傳檔案\r\n    uploadFile () {\r\n      const uploadedFile = this.$refs.file.files[0]\r\n      const formData = new FormData()\r\n      formData.append('file', uploadedFile)\r\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/storage`\r\n      this.status.fileUploading = true\r\n      this.axios.post(url, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      }).then((response) => {\r\n        this.status.fileUploading = false\r\n        if (response.status === 200) {\r\n          this.tempProduct.imageUrl.push(response.data.data.path)\r\n        }\r\n      }).catch(() => {\r\n        console.log('上傳不可超過 2 MB')\r\n        this.status.fileUploading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}