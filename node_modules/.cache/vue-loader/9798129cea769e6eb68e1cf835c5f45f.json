{"remainingRequest":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\src\\components\\ProductModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\src\\components\\ProductModal.vue","mtime":1596373993729},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdQcm9kdWN0TW9kYWwnLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdGVtcFByb2R1Y3Q6IHsNCiAgICAgICAgaW1hZ2VVcmw6IFtdLA0KICAgICAgICBvcHRpb25zOiB7fQ0KICAgICAgfSwNCiAgICAgIGlzTG9hZGluZzogZmFsc2UsDQogICAgICBzdGF0dXNNc2c6ICcnDQogICAgfQ0KICB9LA0KICBwcm9wczogew0KICAgIHByb2R1Y3RpZDogew0KICAgICAgdHlwZTogU3RyaW5nLA0KICAgICAgZGVmYXVsdDogJycNCiAgICB9LA0KICAgIHN0YXR1czogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdCAoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGlzTmV3OiB7DQogICAgICB0eXBlOiBCb29sZWFuLA0KICAgICAgZGVmYXVsdDogdHJ1ZQ0KICAgIH0sDQogICAgdXNlcjogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdCAoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDmipPlj5blgIvliKXnlKLlk4Hos4fmlpnlh73mlbgNCiAgICBnZXRQcm9kdWN0IChpZCkgew0KICAgICAgLy8g6YGg56uv5a2Y5Y+WTG9hZGluZ+eVq+mdouaJk+mWiw0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQogICAgICAvLyDoqK3lrpogQVBJIOmBoOerr+mAo+e3muWtl+S4sg0KICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVVJRH0vYWRtaW4vZWMvcHJvZHVjdC8ke2lkfWANCiAgICAgIHRoaXMuYXhpb3MuZ2V0KGFwaSkudGhlbigocmVzKSA9PiB7DQogICAgICAgIC8vIHdpbmRvdy4kKCcjcHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKQ0KICAgICAgICAvLyDpgI/pgY4gYXhpb3MgQVBJIOWPluWbnumBoOerr+eUouWTgeizh+aWmQ0KICAgICAgICB0aGlzLnRlbXBQcm9kdWN0ID0gcmVzLmRhdGEuZGF0YQ0KICAgICAgICAvLyDpgaDnq6/lrZjlj5ZMb2FkaW5n55Wr6Z2i6Zec6ZaJDQogICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhlcnJvcikNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDmlrDlop7jgIHmm7TmlrDlgIvliKXnlKLlk4Hlh73mlbgNCiAgICB1cGRhdGVQcm9kdWN0ICgpIHsNCiAgICAgIC8vIOWumue+qeimgeabtOaWsOeahEFQSe+8jOWmguaenOaWsOWinu+8jOWJh2h0dHBNZXRob2Tmk43kvZzngrpwb3N077yM57eo6Lyv54K6cGF0Y2gNCiAgICAgIGNvbnN0IGFwaVVybCA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vJHtwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUR9YA0KICAgICAgbGV0IGFwaSA9IGAke2FwaVVybH0vYWRtaW4vZWMvcHJvZHVjdGANCiAgICAgIHRoaXMuc3RhdHVzTXNnID0gJ+acrOethuizh+aWmeW3suaIkOWKn+aWsOWiniEnDQogICAgICAvLyDms6jmhI9odHRwTWV0aG9k6KaB5bCP5a+rDQogICAgICBsZXQgaHR0cE1ldGhvZCA9ICdwb3N0Jw0KICAgICAgLy8g6Kit5a6a5pu05paw55Si5ZOBYXBp6Lev5b6RDQogICAgICBpZiAoIXRoaXMuaXNOZXcpIHsNCiAgICAgICAgYXBpID0gYCR7YXBpVXJsfS9hZG1pbi9lYy9wcm9kdWN0LyR7dGhpcy50ZW1wUHJvZHVjdC5pZH1gDQogICAgICAgIGh0dHBNZXRob2QgPSAncGF0Y2gnDQogICAgICAgIHRoaXMuc3RhdHVzTXNnID0gJ+acrOethuizh+aWmeW3suWujOaIkOabtOaWsCEnDQogICAgICB9DQogICAgICAvLyB0b2tlbuW3suWumue+qeWcqGNyZWF0ZWTmmYLmnJ8NCiAgICAgIC8vIGF4aW9zLmRlZmF1bHRzLmhlYWRlcnMuY29tbW9uLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7dGhpcy51c2VyLnRva2VufWA7DQogICAgICAvLyBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsnQXV0aG9yaXphdGlvbiddID0gYEJlYXJlciAke3RoaXMudXNlci50b2tlbn1gOw0KICAgICAgLy8g6YCP6YGOIGF4aW9zW2h0dHBNZXRob2RdIOWft+ihjHBvc3Qg5oiWIHBhdGNoIOaTjeS9nA0KICAgICAgdGhpcy5heGlvc1todHRwTWV0aG9kXShhcGksIHRoaXMudGVtcFByb2R1Y3QpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHdpbmRvdy4kKCcjcHJvZHVjdE1vZGFsJykubW9kYWwoJ2hpZGUnKQ0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICAvLyDlj4PogIPnr4Tkvovoo73kvZzlkJDlj7jmj5DnpLroqIrmga8NCiAgICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ21lc3NhZ2U6cHVzaCcsDQogICAgICAgICAgICB0aGlzLnN0YXR1c01zZywNCiAgICAgICAgICAgICdzdWNjZXNzJykNCiAgICAgICAgICAvLyDlkbzlj6vlpJblsaTmm7TmlrDnlavpnaINCiAgICAgICAgICB0aGlzLiRlbWl0KCd1cGRhdGUnKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJGJ1cy4kZW1pdCgnbWVzc2FnZTpwdXNoJywNCiAgICAgICAgICAgIGDllpTmrZB+5LiK5YKz5ZyW54mH5LiN5Y+v6LaF6YGOIDIgTUINCiAgICAgICAgJHtyZXNwb25zZS5kYXRhLm1lc3NhZ2V9KCR7cmVzcG9uc2Uuc3RhdHVzfSlgLA0KICAgICAgICAgICAgJ2RhbmdlcicpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICB0aGlzLiRidXMuJGVtaXQoJ21lc3NhZ2U6cHVzaCcsDQogICAgICAgICAgICBg5ZaU5q2QfueZvOeUn+mMr+iqpOaDuToNCiAgICAgICAgJHtlcnJvci5yZXNwb25zZS5kYXRhLm1lc3NhZ2V9KCR7ZXJyb3IucmVzcG9uc2Uuc3RhdHVzfSlgLA0KICAgICAgICAgICAgJ2RhbmdlcicpDQogICAgICAgIHdpbmRvdy4kKCcjcHJvZHVjdE1vZGFsJykubW9kYWwoJ2hpZGUnKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOWPg+iAg+evhOS+i+WKoOWFpeS4iuWCs+aqlOahiA0KICAgIHVwbG9hZEZpbGUgKCkgew0KICAgICAgY29uc3QgdXBsb2FkZWRGaWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdDQogICAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgpDQogICAgICBmb3JtRGF0YS5hcHBlbmQoJ2ZpbGUnLCB1cGxvYWRlZEZpbGUpDQogICAgICBjb25zdCB1cmwgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9hZG1pbi9zdG9yYWdlYA0KICAgICAgdGhpcy5zdGF0dXMuZmlsZVVwbG9hZGluZyA9IHRydWUNCiAgICAgIHRoaXMuYXhpb3MucG9zdCh1cmwsIGZvcm1EYXRhLCB7DQogICAgICAgIGhlYWRlcnM6IHsNCiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ211bHRpcGFydC9mb3JtLWRhdGEnDQogICAgICAgIH0NCiAgICAgIH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMuc3RhdHVzLmZpbGVVcGxvYWRpbmcgPSBmYWxzZQ0KICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHsNCiAgICAgICAgICB0aGlzLnRlbXBQcm9kdWN0LmltYWdlVXJsLnB1c2gocmVzcG9uc2UuZGF0YS5kYXRhLnBhdGgpDQogICAgICAgICAgLy8g5Y+D6ICD56+E5L6L6KO95L2c5ZCQ5Y+45o+Q56S66KiK5oGvDQogICAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdtZXNzYWdlOnB1c2gnLA0KICAgICAgICAgICAgJ+WclueJh+W3suS4iuWCs+aIkOWKnyEnLA0KICAgICAgICAgICAgJ3N1Y2Nlc3MnKQ0KICAgICAgICB9DQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgdGhpcy4kYnVzLiRlbWl0KCdtZXNzYWdlOnB1c2gnLA0KICAgICAgICAgICAgYOWWlOatkH7kuIrlgrPlnJbniYfkuI3lj6/otoXpgY4gMiBNQg0KICAgICAgICAke2Vycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZX0oJHtlcnJvci5yZXNwb25zZS5zdGF0dXN9KWAsDQogICAgICAgICAgICAnZGFuZ2VyJykNCiAgICAgICAgLy8gY29uc29sZS5sb2coJ+S4iuWCs+S4jeWPr+i2hemBjiAyIE1CJykNCiAgICAgICAgdGhpcy5zdGF0dXMuZmlsZVVwbG9hZGluZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KfQ0K"},{"version":3,"sources":["ProductModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ProductModal.vue","sourceRoot":"src/components","sourcesContent":["<template>\r\n    <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"productModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog modal-xl\" role=\"document\">\r\n              <div class=\"modal-content\">\r\n                <div :class=\"{'bg-primary': isNew , 'bg-success': !isNew}\" class=\"modal-header text-white\">\r\n                  <h5 v-if=\"isNew\" class=\"modal-title\" id=\"productModalLabel\">新增資料</h5>\r\n                  <h5 v-else class=\"modal-title\" id=\"productModalLabel\">編輯資料</h5>\r\n                  <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\" class=\"text-white\">&times;</span>\r\n                  </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    <form>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-4\">\r\n                                <!-- <div class=\"form-group\">\r\n                                    <label for=\"imageUrl\" class=\"col-form-label\">輸入圖片網址:</label>\r\n                                    <input v-model=\"tempProduct.imageUrl\" type=\"text\" class=\"form-control\" id=\"imageUrl\" placeholder=\"請輸入圖片連結位址\">\r\n                                </div> -->\r\n                                <div v-for=\"i in 5\" :key=\"i + 'img'\" class=\"form-group\">\r\n                                    <label :for=\"'img' + i\">輸入圖片網址</label>\r\n                                    <input :id=\"'img' + i\" v-model=\"tempProduct.imageUrl[i - 1]\" type=\"text\" class=\"form-control\"\r\n                                      placeholder=\"請輸入圖片連結\">\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"customFile\">\r\n                                      或 上傳圖片\r\n                                      <i v-if=\"status.fileUploading\" class=\"fas fa-spinner fa-spin\"></i>\r\n                                    </label>\r\n                                    <input id=\"customFile\" ref=\"file\" type=\"file\" class=\"form-control\" @change=\"uploadFile\">\r\n                                </div>\r\n                                <!-- <img :src=\"tempProduct.imageUrl\" alt=\"\" class=\"image-fluid\"> -->\r\n                                <!-- <div v-if=\"isNew\" class=\"d-none\"></div> -->\r\n                                <div class=\"card\">\r\n                                    <img class=\"card-img-top\" :src=\"tempProduct.imageUrl[0]\" alt>\r\n                                    <div class=\"card-body\">\r\n                                      <p v-if=\"isNew\" class=\"card-text\">輸入圖片網址後立即預覽圖片</p>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"imgStyle\" class=\"col-form-label\">Image Style:</label>\r\n                                    <input v-model=\"tempProduct.options.imgStyle\" type=\"text\" class=\"form-control\" id=\"imgStyle\" placeholder=\"請輸入圖片樣式(css)\">\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"col-8\">\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"title\" class=\"col-form-label\">標題</label>\r\n                                    <input v-model=\"tempProduct.title\" type=\"text\" class=\"form-control\" id=\"title\" placeholder=\"請輸入產品標題\">\r\n                                </div>\r\n                                <div class=\"form-row\">\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"category\" class=\"col-form-label\">類別</label>\r\n                                        <input v-model=\"tempProduct.category\" type=\"text\" class=\"form-control\" id=\"category\" placeholder=\"請輸入類別\">\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"unit\" class=\"col-form-label\">單位</label>\r\n                                        <input v-model=\"tempProduct.unit\" type=\"text\" class=\"form-control\" id=\"unit\" placeholder=\"請輸入單位\">\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-row\">\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"origin_price\" class=\"col-form-label\">原價</label>\r\n                                        <input v-model=\"tempProduct.origin_price\" type=\"number\" class=\"form-control\" id=\"origin_price\" placeholder=\"請輸入原價\">\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-6\">\r\n                                        <label for=\"price\" class=\"col-form-label\">售價</label>\r\n                                        <input v-model=\"tempProduct.price\" type=\"number\" class=\"form-control\" id=\"price\" placeholder=\"請輸入售價\">\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"description\" class=\"col-form-label\">產品描述</label>\r\n                                    <textarea v-model=\"tempProduct.description\" class=\"form-control\" id=\"description\" placeholder=\"請輸入產品描述\"></textarea>\r\n                                </div>\r\n                                <div class=\"form-group\">\r\n                                    <label for=\"content\" class=\"col-form-label\">產品內容介紹</label>\r\n                                    <textarea v-model=\"tempProduct.content\" class=\"form-control\" id=\"content\" placeholder=\"請輸入產品內容介紹\"></textarea>\r\n                                </div>\r\n                                <div class=\"form-row\">\r\n                                    <div class=\"form-group col-md-4\">\r\n                                        <div class=\"form-check\">\r\n                                            <input id=\"onSale\" v-model=\"tempProduct.options.onSale\" class=\"form-check-input\" type=\"checkbox\"\r\n                                              :true-value=\"true\" :false-value=\"false\">\r\n                                            <label class=\"form-check-label\" for=\"onSale\">是否特價</label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-5\">\r\n                                        <div class=\"form-check\">\r\n                                            <input id=\"is_enabled\" v-model=\"tempProduct.enabled\" class=\"form-check-input\" type=\"checkbox\"\r\n                                              :true-value=\"true\" :false-value=\"false\">\r\n                                            <label class=\"form-check-label\" for=\"is_enabled\">是否上架(顯示於前台)</label>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"form-group col-md-3\">\r\n                                      <label for=\"order\" class=\"col-form-label\">顯示序號</label>\r\n                                      <input v-model=\"tempProduct.options.order\" class=\"form-control\" type=\"number\" name=\"order\" id=\"order\" placeholder=\"請輸入顯示序號\" >\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                  <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">取消</button>\r\n                  <button @click=\"updateProduct()\" type=\"button\" :class=\"{'btn-primary':isNew,'btn-success':!isNew}\" class=\"btn\">確認送出</button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n             <!-- Vue Loading Overlay Component -->\r\n        <loading :active.sync=\"isLoading\"></loading>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'ProductModal',\r\n  data () {\r\n    return {\r\n      tempProduct: {\r\n        imageUrl: [],\r\n        options: {}\r\n      },\r\n      isLoading: false,\r\n      statusMsg: ''\r\n    }\r\n  },\r\n  props: {\r\n    productid: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    status: {\r\n      type: Object,\r\n      default () {\r\n        return {\r\n        }\r\n      }\r\n    },\r\n    isNew: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    user: {\r\n      type: Object,\r\n      default () {\r\n        return {\r\n        }\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 抓取個別產品資料函數\r\n    getProduct (id) {\r\n      // 遠端存取Loading畫面打開\r\n      this.isLoading = true\r\n      // 設定 API 遠端連線字串\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/ec/product/${id}`\r\n      this.axios.get(api).then((res) => {\r\n        // window.$('#productModal').modal('show')\r\n        // 透過 axios API 取回遠端產品資料\r\n        this.tempProduct = res.data.data\r\n        // 遠端存取Loading畫面關閉\r\n        this.isLoading = false\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n    // 新增、更新個別產品函數\r\n    updateProduct () {\r\n      // 定義要更新的API，如果新增，則httpMethod操作為post，編輯為patch\r\n      const apiUrl = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}`\r\n      let api = `${apiUrl}/admin/ec/product`\r\n      this.statusMsg = '本筆資料已成功新增!'\r\n      // 注意httpMethod要小寫\r\n      let httpMethod = 'post'\r\n      // 設定更新產品api路徑\r\n      if (!this.isNew) {\r\n        api = `${apiUrl}/admin/ec/product/${this.tempProduct.id}`\r\n        httpMethod = 'patch'\r\n        this.statusMsg = '本筆資料已完成更新!'\r\n      }\r\n      // token已定義在created時期\r\n      // axios.defaults.headers.common.Authorization = `Bearer ${this.user.token}`;\r\n      // axios.defaults.headers.common['Authorization'] = `Bearer ${this.user.token}`;\r\n      // 透過 axios[httpMethod] 執行post 或 patch 操作\r\n      this.axios[httpMethod](api, this.tempProduct).then((response) => {\r\n        window.$('#productModal').modal('hide')\r\n        if (response.status === 200) {\r\n          // 參考範例製作吐司提示訊息\r\n          this.$bus.$emit('message:push',\r\n            this.statusMsg,\r\n            'success')\r\n          // 呼叫外層更新畫面\r\n          this.$emit('update')\r\n        } else {\r\n          this.$bus.$emit('message:push',\r\n            `喔歐~上傳圖片不可超過 2 MB\r\n        ${response.data.message}(${response.status})`,\r\n            'danger')\r\n        }\r\n      }).catch((error) => {\r\n        this.$bus.$emit('message:push',\r\n            `喔歐~發生錯誤惹:\r\n        ${error.response.data.message}(${error.response.status})`,\r\n            'danger')\r\n        window.$('#productModal').modal('hide')\r\n      })\r\n    },\r\n    // 參考範例加入上傳檔案\r\n    uploadFile () {\r\n      const uploadedFile = this.$refs.file.files[0]\r\n      const formData = new FormData()\r\n      formData.append('file', uploadedFile)\r\n      const url = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/admin/storage`\r\n      this.status.fileUploading = true\r\n      this.axios.post(url, formData, {\r\n        headers: {\r\n          'Content-Type': 'multipart/form-data'\r\n        }\r\n      }).then((response) => {\r\n        this.status.fileUploading = false\r\n        if (response.status === 200) {\r\n          this.tempProduct.imageUrl.push(response.data.data.path)\r\n          // 參考範例製作吐司提示訊息\r\n          this.$bus.$emit('message:push',\r\n            '圖片已上傳成功!',\r\n            'success')\r\n        }\r\n      }).catch((error) => {\r\n        this.$bus.$emit('message:push',\r\n            `喔歐~上傳圖片不可超過 2 MB\r\n        ${error.response.data.message}(${error.response.status})`,\r\n            'danger')\r\n        // console.log('上傳不可超過 2 MB')\r\n        this.status.fileUploading = false\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}