{"remainingRequest":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\src\\views\\admin\\Dashboard.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\src\\views\\admin\\Dashboard.vue","mtime":1595859410416},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w6\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdEYXNoYm9hcmQnLA0KICBkYXRhICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgdG9rZW46ICcnLA0KICAgICAgY2hlY2tTdWNlc3M6IGZhbHNlDQogICAgfQ0KICB9LA0KICBjcmVhdGVkICgpIHsNCiAgICB0aGlzLmNoZWNrTG9naW4oKQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgY2hlY2tMb2dpbiAoKSB7DQogICAgICB0aGlzLmlzTG9hZGluZyA9IHRydWUNCiAgICAgIC8vIOWPluW+l+S9v+eUqOiAhSB0b2tlbg0KICAgICAgdGhpcy50b2tlbiA9IGRvY3VtZW50LmNvb2tpZS5yZXBsYWNlKC8oPzooPzpefC4qO1xzKil0b2tlblxzKj1ccyooW147XSopLiokKXxeLiokLywgJyQxJykNCiAgICAgIC8vIOe0gOmMhOmgkOioreWFseWQjOmpl+itieeUqCB0b2tlbiDmrIrpmZANCiAgICAgIHRoaXMuYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb24uQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHt0aGlzLnRva2VufWANCiAgICAgIGNvbnN0IGFwaSA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vYXV0aC9jaGVja2ANCiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZQ0KICAgICAgdGhpcy4kaHR0cC5wb3N0KGFwaSwgeyAnYXBpX3Rva2VuJzogdGhpcy50b2tlbiB9KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpDQogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLnN1Y2Nlc3MpIHsNCiAgICAgICAgICB0aGlzLmNoZWNrU3VjZXNzID0gdHJ1ZQ0KICAgICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgfSkuY2F0Y2goKGVycikgPT4gew0KICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g55m75Ye65Ye95byPDQogICAgbG9nb3V0ICgpIHsNCiAgICAgIC8vIDEuZG9jdW1lbnQuY29va2llIOacrOWcsHRva2Vu5Y+K5Yiw5pyf5pel5riF56m6DQogICAgICBkb2N1bWVudC5jb29raWUgPSAndG9rZW49O2V4cGlyZXM9O3BhdGg9LycNCiAgICAgIGNvbnNvbGUubG9nKCflt7LmuIXnqbp0b2tlbicpDQogICAgICAvLyAyLueZu+WHuuW+jOi9ieeUouWTgeWIl+ihqOmggQ0KICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9sb2dpbicpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["Dashboard.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Dashboard.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div class=\"dashboard\">\r\n       <loading :active.sync=\"isLoading\"></loading>\r\n        <div class=\"navbar navbar-expand-lg navbar-dark bg-secondary rounded-lg mb-3\">\r\n        <a class=\"navbar-brand font-weight-bolder shadow px-2\" href=\"#\">\r\n            後台\r\n            <sub>管理</sub>\r\n        </a>\r\n        <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n            <span class=\"navbar-toggler-icon\"></span>\r\n        </button>\r\n        <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\r\n            <ul class=\"navbar-nav\">\r\n            <!-- <li class=\"nav-item\"> -->\r\n                <!-- <a class=\"nav-link\" href=\"product.html\">產品維護 <span class=\"sr-only\">(current)</span></a> -->\r\n                <!-- <router-link class=\"nav-link\" to=\"/admin\">首頁</router-link>\r\n            </li> -->\r\n            <li class=\"nav-item\">\r\n                <router-link class=\"nav-link\" to=\"/admin/products\">產品列表</router-link>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <router-link class=\"nav-link\" to=\"/admin/carts\">購物車</router-link>\r\n            </li>\r\n            </ul>\r\n        </div>\r\n        <router-link to=\"/\" class=\"btn btn-outline-success mr-2\">回前台</router-link>\r\n        <button @click=\"logout()\" class=\"btn btn-success my-2 my-sm-0\" type=\"button\">登出</button>\r\n        </div>\r\n        <router-view :token=\"token\" v-if=\"this.checkSucess\"></router-view>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Dashboard',\r\n  data () {\r\n    return {\r\n      token: '',\r\n      checkSucess: false\r\n    }\r\n  },\r\n  created () {\r\n    this.checkLogin()\r\n  },\r\n  methods: {\r\n    checkLogin () {\r\n      this.isLoading = true\r\n      // 取得使用者 token\r\n      this.token = document.cookie.replace(/(?:(?:^|.*;\\s*)token\\s*=\\s*([^;]*).*$)|^.*$/, '$1')\r\n      // 紀錄預設共同驗證用 token 權限\r\n      this.axios.defaults.headers.common.Authorization = `Bearer ${this.token}`\r\n      const api = `${process.env.VUE_APP_APIPATH}/auth/check`\r\n      // eslint-disable-next-line\r\n      this.$http.post(api, { 'api_token': this.token }).then((response) => {\r\n        // console.log(response.data.success)\r\n        if (response.data.success) {\r\n          this.checkSucess = true\r\n          this.isLoading = false\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err)\r\n        this.isLoading = false\r\n        this.$router.push('/login')\r\n      })\r\n    },\r\n    // 登出函式\r\n    logout () {\r\n      // 1.document.cookie 本地token及到期日清空\r\n      document.cookie = 'token=;expires=;path=/'\r\n      console.log('已清空token')\r\n      // 2.登出後轉產品列表頁\r\n      this.$router.push('/login')\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}