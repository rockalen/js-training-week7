{"remainingRequest":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\src\\views\\admin\\CustomerOrders.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\src\\views\\admin\\CustomerOrders.vue","mtime":1596275372195},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\BINE\\Desktop\\JS_HW\\master\\js-w7\\project\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdDdXN0b21lck9yZGVyJywNCiAgZGF0YSAoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHByb2R1Y3RzOiBbXSwNCiAgICAgIHRlbXBQcm9kdWN0OiB7DQogICAgICAvLyBudW06IDAsDQogICAgICAgIHNlbGVjdE51bTogMA0KICAgICAgfSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgbmFtZTogJycsDQogICAgICAgIGVtYWlsOiAnJywNCiAgICAgICAgdGVsOiAnJywNCiAgICAgICAgYWRkcmVzczogJycsDQogICAgICAgIHBheW1lbnQ6ICcnLA0KICAgICAgICBtZXNzYWdlOiAnJw0KICAgICAgfSwNCiAgICAgIGNhcnQ6IHt9LA0KICAgICAgY2FydFRvdGFsOiAwLA0KICAgICAgaXNMb2FkaW5nOiBmYWxzZSwNCiAgICAgIC8vICAgdXNlcjogew0KICAgICAgLy8gICAgICAgVVVJRDogJzFlNDZmNDIxLWJiYWUtNDIxMi04NTM5LTU1ZWExYzUzMjljZicsDQogICAgICAvLyAgICAgICBBUElfUEFUSDogJ2h0dHBzOi8vY291cnNlLWVjLWFwaS5oZXhzY2hvb2wuaW8vYXBpLycsDQogICAgICAvLyAgIH0sDQogICAgICBzdGF0dXM6IHsNCiAgICAgICAgbG9hZGluZ0J0bjogJycNCiAgICAgIH0NCiAgICB9DQogIH0sDQogIGNyZWF0ZWQgKCkgew0KICAgIHRoaXMuZ2V0UHJvZHVjdHMoKQ0KICAgIHRoaXMuZ2V0Q2FydCgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICAvLyDlj5blvpfnlKLlk4HliJfooajkuKbmuLLmn5PnlavpnaINCiAgICBnZXRQcm9kdWN0cyAocGFnZSA9IDEpIHsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQ0KICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVVJRH0vZWMvcHJvZHVjdHM/cGFnZT0ke3BhZ2V9YA0KICAgICAgLy8gY29uc29sZS5sb2coYXBpKTsNCiAgICAgIHRoaXMuYXhpb3MuZ2V0KGFwaSkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgdGhpcy5wcm9kdWN0cyA9IHJlc3BvbnNlLmRhdGEuZGF0YQ0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDlj5blvpfnlKLlk4HoqbPntLDos4foqIrkuKbplovllZ9Nb2RhbA0KICAgIGdldFByb2R1Y3QgKGlkKSB7DQogICAgICAvLyDoqK3lrprmjInpiJVkaXNhYmxlLHNwaW5uZXLmlYjmnpwNCiAgICAgIHRoaXMuc3RhdHVzLmxvYWRpbmdCdG4gPSBpZA0KICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVVJRH0vZWMvcHJvZHVjdC8ke2lkfWANCiAgICAgIC8vIGF4aW9z6Z2e5ZCM5q2l6YGg56uv5Y+W5b6X6LOH5paZDQogICAgICB0aGlzLmF4aW9zLmdldChhcGkpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgIHRoaXMudGVtcFByb2R1Y3QgPSByZXNwb25zZS5kYXRhLmRhdGENCiAgICAgICAgLy8g5by35Yi26ZuZ5ZCR57aB5a6a6KiC6LO85pW46YePDQogICAgICAgIHRoaXMuJHNldCh0aGlzLnRlbXBQcm9kdWN0LCAnc2VsZWN0TnVtJywgMCkNCg0KICAgICAgICAvLyDliKTmlrdzZWxlY3Qg5pW46YeP6IiH6Kmy55Si5ZOB5Zyo6LO854mp6LuK5pW46YeP5LiA6Ie05YmHc2VsZWN0ZWQNCiAgICAgICAgaWYgKHRoaXMuY2FydC5sZW5ndGgpIHsNCiAgICAgICAgICB0aGlzLmNhcnQuZm9yRWFjaChpdGVtQ2FydCA9PiB7DQogICAgICAgICAgICBpZiAoaXRlbUNhcnQucHJvZHVjdC5pZCA9PT0gdGhpcy50ZW1wUHJvZHVjdC5pZCkgew0KICAgICAgICAgICAgICB0aGlzLiRzZXQodGhpcy50ZW1wUHJvZHVjdCwgJ3NlbGVjdE51bScsIGl0ZW1DYXJ0LnF1YW50aXR5KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH07DQogICAgICAgIC8vIOmWi+WVn+eUouWTgemggW1vZGFsDQogICAgICAgIHdpbmRvdy4kKCcjcHJvZHVjdE1vZGFsJykubW9kYWwoJ3Nob3cnKQ0KICAgICAgICAvLyDlj5blm57os4fmlpnlvozlj5bmtojmjInpiJVkaXNhYmxlLHNwaW5uZXLmlYjmnpwNCiAgICAgICAgdGhpcy5zdGF0dXMubG9hZGluZ0J0biA9ICcnDQogICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDoqbPntLDnlKLlk4FNb2RhbOWFp3NlbGVjdOaUueiuiuaVuOmHj+W+jOizpuS6iHNlbGVjdE51bQ0KICAgIGNoYW5nZVNlbGVjdGVkIChldmVudCkgew0KICAgICAgdGhpcy4kc2V0KHRoaXMudGVtcFByb2R1Y3QsICdzZWxlY3ROdW0nLCBldmVudC50YXJnZXQudmFsdWUpDQogICAgfSwNCiAgICAvLyDlj5blvpfos7znianou4rlhafnlKLlk4HliJfooagNCiAgICBnZXRDYXJ0ICgpIHsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQ0KICAgICAgLy8g5q+P5qyh5YO55qC86KaB5riF56m677yM57i95YO55omN5pyD5bCNDQogICAgICB0aGlzLmNhcnRUb3RhbCA9IDANCiAgICAgIGNvbnN0IGFwaSA9IGAke3Byb2Nlc3MuZW52LlZVRV9BUFBfQVBJUEFUSH0vJHtwcm9jZXNzLmVudi5WVUVfQVBQX1VVSUR9L2VjL3Nob3BwaW5nYA0KICAgICAgdGhpcy5heGlvcy5nZXQoYXBpKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLmNhcnQgPSByZXNwb25zZS5kYXRhLmRhdGENCiAgICAgICAgdGhpcy5jYXJ0LmZvckVhY2goKGl0ZW0pID0+IHsNCiAgICAgICAgLy8g5q+P5YCL55Si5ZOB5Zau5YO5KuaVuOmHj+eahOe0r+WKoOetieaWvOe4veWDuQ0KICAgICAgICAgIHRoaXMuY2FydFRvdGFsICs9IChpdGVtLnByb2R1Y3QucHJpY2UgKiBpdGVtLnF1YW50aXR5KQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5aKe5Yqg55Si5ZOB5Yiw6LO854mp6LuKDQogICAgYWRkVG9DYXJ0IChpdGVtLCBxdWFudGl0eSA9IDEpIHsNCiAgICAgIHRoaXMuc3RhdHVzLmxvYWRpbmdCdG4gPSBpdGVtLmlkDQogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9lYy9zaG9wcGluZ2ANCiAgICAgIGNvbnN0IGNhcnQgPSB7DQogICAgICAgIHByb2R1Y3Q6IGl0ZW0uaWQsDQogICAgICAgIHF1YW50aXR5DQogICAgICB9DQogICAgICB0aGlzLmF4aW9zLnBvc3QoYXBpLCBjYXJ0KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICB0aGlzLmdldENhcnQoKQ0KICAgICAgICB0aGlzLnN0YXR1cy5sb2FkaW5nQnRuID0gJycNCiAgICAgICAgd2luZG93LiQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpDQogICAgICB9KS5jYXRjaCgoZXJyb3IpID0+IHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcnNbMF0pDQogICAgICAgIGFsZXJ0KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzWzBdKQ0KICAgICAgICB0aGlzLnN0YXR1cy5sb2FkaW5nQnRuID0gJycNCiAgICAgICAgd2luZG93LiQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g6LO854mp6LuK5YWn55Si5ZOB5pW46YeP6KiI566XDQogICAgcXVhbnRpdHlDYWxjIChpZCwgbnVtKSB7DQogICAgLy8gdGhpcy5zdGF0dXMubG9hZGluZ0J0biA9IGlkOw0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9lYy9zaG9wcGluZ2ANCiAgICAgIGNvbnN0IGRhdGEgPSB7DQogICAgICAgIHByb2R1Y3Q6IGlkLA0KICAgICAgICBxdWFudGl0eTogbnVtDQogICAgICB9DQogICAgICB0aGlzLmF4aW9zLnBhdGNoKGFwaSwgZGF0YSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgdGhpcy5nZXRDYXJ0KCkNCiAgICAgICAgd2luZG93LiQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpDQogICAgICAgIC8vIHRoaXMuc3RhdHVzLmxvYWRpbmdCdG4gPSAnJzsNCiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgIC8vIHRoaXMuc3RhdHVzLmxvYWRpbmdCdG4gPSAnJzsNCiAgICAgICAgd2luZG93LiQoJyNwcm9kdWN0TW9kYWwnKS5tb2RhbCgnaGlkZScpDQogICAgICAgIGFsZXJ0KGVycm9yLnJlc3BvbnNlLmRhdGEuZXJyb3JzWzBdKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOenu+mZpOizvOeJqei7iuWFp+WWrumgheeUouWTgQ0KICAgIGRlbEZyb21DYXJ0IChpZCkgew0KICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlDQogICAgICBjb25zdCBhcGkgPSBgJHtwcm9jZXNzLmVudi5WVUVfQVBQX0FQSVBBVEh9LyR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9VVUlEfS9lYy9zaG9wcGluZy8ke2lkfWANCiAgICAgIHRoaXMuYXhpb3MuZGVsZXRlKGFwaSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2UNCiAgICAgICAgdGhpcy5nZXRDYXJ0KCkNCiAgICAgIH0pDQogICAgfSwNCiAgICAvLyDnp7vpmaTos7znianou4rmiYDmnInlhaflrrkNCiAgICByZW1vdmVDYXJ0QWxsICgpIHsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQ0KICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVVJRH0vZWMvc2hvcHBpbmcvYWxsL3Byb2R1Y3RgDQogICAgICB0aGlzLmF4aW9zLmRlbGV0ZShhcGkpLnRoZW4oKCkgPT4gew0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgIHRoaXMuZ2V0Q2FydCgpDQogICAgICB9KQ0KICAgIH0sDQogICAgLy8g5a6M5oiQ6KiC5ZauDQogICAgc3VjY2Vzc09yZGVyICgpIHsNCiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZQ0KICAgICAgY29uc3QgYXBpID0gYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9BUElQQVRIfS8ke3Byb2Nlc3MuZW52LlZVRV9BUFBfVVVJRH0vZWMvb3JkZXJzYA0KICAgICAgdGhpcy5heGlvcy5wb3N0KGFwaSwgdGhpcy5mb3JtKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5kYXRhLmlkKSB7DQogICAgICAgICAgLy8gdGhpcy5jYXJ0VG90YWwgPSByZXNwb25zZS5kYXRhLmRhdGEuYW1vdW50Ow0KICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY2FydFRvdGFsKTsNCiAgICAgICAgICB3aW5kb3cuJCgnI3N1Y2Nlc3NNb2RhbCcpLm1vZGFsKCdzaG93JykNCiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgICAgdGhpcy5nZXRDYXJ0KCkNCiAgICAgICAgfTsNCiAgICAgIH0pLmNhdGNoKChlcnJvcikgPT4gew0KICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlDQogICAgICAgIGNvbnNvbGUubG9nKGVycm9yLnJlc3BvbnNlLmRhdGEubWVzc2FnZSkNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["CustomerOrders.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CustomerOrders.vue","sourceRoot":"src/views/admin","sourcesContent":["<template>\r\n    <div>\r\n    <!-- loading 套件 start -->\r\n        <loading :active.sync=\"isLoading\"></loading>\r\n        <!-- loading 套件 end -->\r\n\r\n        <!-- 產品列表 start -->\r\n        <div class=\"row mt-5\">\r\n            <div v-for=\"(item, index) in products\" :key=\"index\" class=\"col-md-4 mb-4\">\r\n                <div class=\"card\">\r\n                    <img :src=\"item.imageUrl[0]\" class=\"card-img-top cardBg\" alt=\"...\">\r\n                    <div class=\"card-body\">\r\n                        <span class=\"badge badge-secondary float-right ml-2\">{{ item.category }}</span>\r\n                        <h5 class=\"card-title\">{{item.title}}</h5>\r\n                        <p class=\"card-text\" v-html=\"item.content\">{{item.content}}</p>\r\n                        <div class=\"d-flex justify-content-between align-items-baseline\">\r\n                            <div class=\"w-100 text-right\" v-if=\"item.price >= item.origin_price\">{{ item.origin_price | money }}元</div>\r\n                            <del v-if=\"item.price < item.origin_price\">原價{{ item.origin_price | money }}元</del>\r\n                            <div v-if=\"item.price < item.origin_price\" class=\"font-size-20\">現在只要{{item.price | money}}元</div>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"card-footer d-flex\">\r\n                        <button @click=\"getProduct(item.id)\" type=\"button\" class=\"btn btn-outline-secondary btn-sm\" :disabled=\"status.loadingBtn === item.id\">\r\n                            <i v-if=\"status.loadingBtn === item.id\" class=\"spinner-grow spinner-grow-sm\" role=\"status\"></i>\r\n                            查看更多\r\n                        </button >\r\n                        <button @click=\"addToCart(item)\" type=\"button\" class=\"btn btn-outline-danger btn-sm ml-auto\" :disabled=\"status.loadingBtn === item.id\">\r\n                            <i v-if=\"status.loadingBtn === item.id\" class=\"spinner-grow spinner-grow-sm\" role=\"status\"></i>\r\n                            加到購物車\r\n                        </button >\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <!-- 產品列表 end -->\r\n\r\n        <!-- 產品內容 Modal start -->\r\n        <div class=\"modal fade\" id=\"productModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"productModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"productModalLabel\">{{tempProduct.title}}</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                      <!-- 若使用 airbnb eslint 由於 content 是使用 vue2Editor 生成 HTML 標籤\r\n              所以必須使用 v-html 渲染，因此這邊會出現提示警告是正常的 -->\r\n                    <!-- eslint-disable -->\r\n                    <p\r\n                        class=\"mb-0\"\r\n                        v-html=\"tempProduct.content\"\r\n                    />\r\n                    <!-- eslint-disable -->\r\n                    <p class=\"font-size-16\">{{tempProduct.description}}</p>\r\n                    <!-- {{tempProduct.content}} -->\r\n                    <div class=\"d-flex justify-content-between align-items-baseline\">\r\n                        <div v-if=\"tempProduct.price >= tempProduct.origin_price\">{{ tempProduct.origin_price | money }}元</div>\r\n                        <del v-if=\"tempProduct.price < tempProduct.origin_price\">原價{{ tempProduct.origin_price | money }}元</del>\r\n                        <div v-if=\"tempProduct.price < tempProduct.origin_price\" class=\"font-size-20\">現在只要{{tempProduct.price | money}}元</div>\r\n                    </div>\r\n                    <select @change=\"changeSelected($event)\" name class=\"form-control mt-3\">\r\n                        <option value=\"0\" disabled :selected=\"tempProduct.selectNum === 0\">請選擇數量</option>\r\n                        <option v-for=\"num in 10\" :key=\"num\" :value=\"num\" :selected=\"tempProduct.selectNum === num\">\r\n                            選購 {{num}} {{tempProduct.unit}}\r\n                        </option>\r\n                    </select>\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                <!-- <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button> -->\r\n                <div v-if=\"tempProduct.selectNum\" class=\"text-mute mr-3\">\r\n                    小計\r\n                    <strong>{{tempProduct.selectNum*tempProduct.price | money}}</strong>元\r\n                </div>\r\n                <button  @click=\"addToCart(tempProduct,tempProduct.selectNum)\" type=\"button\" class=\"btn btn-primary\" :disabled=\"!tempProduct.selectNum\">\r\n                <i v-if=\"status.loadingBtn === tempProduct.id\" class=\"spinner-grow spinner-grow-sm\" role=\"status\"></i>\r\n                    加到購物車\r\n                </button>\r\n                <!-- <button v-else @click=\"quantityCalc(tempProduct.id,tempProduct.selectNum)\" type=\"button\" class=\"btn btn-primary\" :disabled=\"status.loadingBtn === item.id\">\r\n                    <i v-if=\"status.loadingBtn === tempProduct.id\" class=\"spinner-grow spinner-grow-sm\" role=\"status\"></i>\r\n                    (購物車內已有 {{tempProduct.num}}  {{tempProduct.unit}}) 更新數量\r\n                </button> -->\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        <!--  產品內容 Modal end -->\r\n\r\n        <!-- 購物車頁 Start -->\r\n        <div class=\"row justify-content-center my-5\">\r\n            <div class=\"col-6\">\r\n                <div class=\"text-right mb-3\">\r\n                    <button @click=\"removeCartAll()\" type=\"button\" class=\"btn btn-outline-danger\">\r\n                        <!-- <i class=\"material-icons align-bottom\">delete_forever</i> -->\r\n                        <font-awesome-icon icon=\"trash-alt\"/>\r\n                        刪除所有品項\r\n                    </button>\r\n                </div>\r\n                <table class=\"table\">\r\n                    <thead>\r\n                        <th>刪除</th>\r\n                        <th>品名</th>\r\n                        <th width=\"140\">數量</th>\r\n                        <th >單位</th>\r\n                        <th>單價</th>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"item in cart\" :key=\"item.id\">\r\n                            <td>\r\n                                <button @click=\"delFromCart(item.product.id)\" type=\"button\" class=\"btn btn-outline-danger btn-sm\">\r\n                                    <!-- <i class=\"material-icons align-middle\">delete_forever</i> -->\r\n                                    <font-awesome-icon icon=\"trash-alt\"/>\r\n                                </button>\r\n                            </td>\r\n                            <td>{{item.product.title}}</td>\r\n                            <td>\r\n                                <div class=\"input-group\">\r\n                                    <div class=\"input-group-prepend\">\r\n                                        <button @click=\"quantityCalc(item.product.id,item.quantity+1)\" class=\"btn btn-outline-secondary\" type=\"button\">\r\n                                            +\r\n                                        </button>\r\n                                    </div>\r\n                                    <!-- 鍵盤Enter後輸入數量 -->\r\n                                    <input @keyup.enter=\"quantityCalc(item.product.id, $event.target.value)\" :value=\"item.quantity\" type=\"number\" min=\"1\" class=\"form-control text-center px-1\" >\r\n                                    <div class=\"input-group-append\">\r\n                                        <button @click=\"quantityCalc(item.product.id,item.quantity-1)\" class=\"btn btn-outline-secondary\" type=\"button\" :disabled=\"item.quantity === 1\">\r\n                                            -\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            </td>\r\n                            <td>{{item.product.unit}}</td>\r\n                            <td class=\"text-right\">{{item.product.price | money}} 元</td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <td colspan=\"4\" class=\"text-right\">\r\n                                總計\r\n                            </td>\r\n                            <td class=\"text-right\">\r\n                                {{cartTotal | money}} 元\r\n                            </td>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n        </div>\r\n        <!-- 購物車頁 end -->\r\n\r\n        <!-- 訂單表單 start -->\r\n        <div class=\"row justify-content-center\">\r\n            <validation-observer v-slot=\"{ invalid }\" class=\"col-md-6\">\r\n                <form @submit.prevent=\"successOrder()\">\r\n                    <div class=\"form-group\">\r\n                        <validation-provider\r\n                         v-slot=\"{ errors, classes }\"\r\n                         rules=\"required\"\r\n                        >\r\n                            <label for=\"user-name\">收件人姓名</label>\r\n                            <input type=\"text\" id=\"user-name\" class=\"form-control\" placeholder=\"請輸入姓名\" :class=\"classes\" v-model=\"form.name\">\r\n                            <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                        </validation-provider>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"email|required\">\r\n                            <label for=\"email\">Email</label>\r\n                            <input type=\"email\" id=\"email\" class=\"form-control\" placeholder=\"請輸入Email\" :class=\"classes\" v-model=\"form.email\">\r\n                            <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                        </validation-provider>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required|min:8\">\r\n                            <label for=\"tel\">電話</label>\r\n                            <input type=\"tel\" id=\"tel\" class=\"form-control\" placeholder=\"請輸入電話\" :class=\"classes\" v-model=\"form.tel\">\r\n                            <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                        </validation-provider>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <validation-provider v-slot=\"{ errors, classes }\" rules=\"required\">\r\n                            <label for=\"address\">地址</label>\r\n                            <input type=\"text\" id=\"address\" class=\"form-control\" placeholder=\"請輸入地址\" :class=\"classes\" v-model=\"form.address\">\r\n                            <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span>\r\n                        </validation-provider>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                            <label for=\"payment\">付款方式</label>\r\n                            <select name=\"payment\" id=\"payment\" v-model=\"form.payment\" class=\"form-control\">\r\n                                <option value=\"\" disabled>\r\n                                    請選擇付款方式\r\n                                </option>\r\n                                <option value=\"WebATM\">\r\n                                WebATM\r\n                                </option>\r\n                                <option value=\"ATM\">\r\n                                ATM\r\n                                </option>\r\n                                <option value=\"CVS\">\r\n                                CVS\r\n                                </option>\r\n                                <option value=\"Barcode\">\r\n                                Barcode\r\n                                </option>\r\n                                <option value=\"Credit\">\r\n                                Credit\r\n                                </option>\r\n                                <option value=\"ApplePay\">\r\n                                ApplePay\r\n                                </option>\r\n                                <option value=\"GooglePay\">\r\n                                GooglePay\r\n                                </option>\r\n                            </select>\r\n                    </div>\r\n                    <div class=\"form-group\">\r\n                        <!-- <validation-provider v-slot=\"{ errors, classes }\"> -->\r\n                            <label for=\"message\">備註</label>\r\n                           <textarea v-model=\"form.message\" id=\"message\" cols=\"30\" rows=\"3\" class=\"form-control\"></textarea>\r\n                            <!-- <span v-if=\"errors[0]\" class=\"text-danger\">{{ errors[0] }}</span> -->\r\n                        <!-- </validation-provider> -->\r\n                    </div>\r\n                    <div class=\"text-right\">\r\n                        <button type=\"submit\" class=\"btn btn-primary my-5\" :disabled=\"invalid\">\r\n                            確認送出\r\n                        </button>\r\n                    </div>\r\n                </form>\r\n            </validation-observer>\r\n        </div>\r\n        <!-- 訂單表單 end -->\r\n        <!--完成訂單 Modal -->\r\n        <div class=\"modal fade\" id=\"successModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"successModalLabel\" aria-hidden=\"true\">\r\n            <div class=\"modal-dialog\" role=\"document\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"modal-header\">\r\n                <h5 class=\"modal-title\" id=\"successModalLabel\">完成訂單</h5>\r\n                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                    <span aria-hidden=\"true\">&times;</span>\r\n                </button>\r\n                </div>\r\n                <div class=\"modal-body\">\r\n                    恭喜你已完成訂單。\r\n                </div>\r\n                <div class=\"modal-footer\">\r\n                <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Close</button>\r\n                <!-- <button type=\"button\" class=\"btn btn-primary\">Save changes</button> -->\r\n                </div>\r\n            </div>\r\n            </div>\r\n        </div>\r\n        <!-- 完成訂單Modal end-->\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'CustomerOrder',\r\n  data () {\r\n    return {\r\n      products: [],\r\n      tempProduct: {\r\n      // num: 0,\r\n        selectNum: 0\r\n      },\r\n      form: {\r\n        name: '',\r\n        email: '',\r\n        tel: '',\r\n        address: '',\r\n        payment: '',\r\n        message: ''\r\n      },\r\n      cart: {},\r\n      cartTotal: 0,\r\n      isLoading: false,\r\n      //   user: {\r\n      //       UUID: '1e46f421-bbae-4212-8539-55ea1c5329cf',\r\n      //       API_PATH: 'https://course-ec-api.hexschool.io/api/',\r\n      //   },\r\n      status: {\r\n        loadingBtn: ''\r\n      }\r\n    }\r\n  },\r\n  created () {\r\n    this.getProducts()\r\n    this.getCart()\r\n  },\r\n  methods: {\r\n    // 取得產品列表並渲染畫面\r\n    getProducts (page = 1) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/products?page=${page}`\r\n      // console.log(api);\r\n      this.axios.get(api).then((response) => {\r\n        this.products = response.data.data\r\n        this.isLoading = false\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    // 取得產品詳細資訊並開啟Modal\r\n    getProduct (id) {\r\n      // 設定按鈕disable,spinner效果\r\n      this.status.loadingBtn = id\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/product/${id}`\r\n      // axios非同步遠端取得資料\r\n      this.axios.get(api).then((response) => {\r\n        this.tempProduct = response.data.data\r\n        // 強制雙向綁定訂購數量\r\n        this.$set(this.tempProduct, 'selectNum', 0)\r\n\r\n        // 判斷select 數量與該產品在購物車數量一致則selected\r\n        if (this.cart.length) {\r\n          this.cart.forEach(itemCart => {\r\n            if (itemCart.product.id === this.tempProduct.id) {\r\n              this.$set(this.tempProduct, 'selectNum', itemCart.quantity)\r\n            }\r\n          })\r\n        };\r\n        // 開啟產品頁modal\r\n        window.$('#productModal').modal('show')\r\n        // 取回資料後取消按鈕disable,spinner效果\r\n        this.status.loadingBtn = ''\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    // 詳細產品Modal內select改變數量後賦予selectNum\r\n    changeSelected (event) {\r\n      this.$set(this.tempProduct, 'selectNum', event.target.value)\r\n    },\r\n    // 取得購物車內產品列表\r\n    getCart () {\r\n      this.isLoading = true\r\n      // 每次價格要清空，總價才會對\r\n      this.cartTotal = 0\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      this.axios.get(api).then((response) => {\r\n        this.cart = response.data.data\r\n        this.cart.forEach((item) => {\r\n        // 每個產品單價*數量的累加等於總價\r\n          this.cartTotal += (item.product.price * item.quantity)\r\n        })\r\n        this.isLoading = false\r\n      })\r\n    },\r\n    // 增加產品到購物車\r\n    addToCart (item, quantity = 1) {\r\n      this.status.loadingBtn = item.id\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      const cart = {\r\n        product: item.id,\r\n        quantity\r\n      }\r\n      this.axios.post(api, cart).then((response) => {\r\n        this.getCart()\r\n        this.status.loadingBtn = ''\r\n        window.$('#productModal').modal('hide')\r\n      }).catch((error) => {\r\n        console.log(error.response.data.errors[0])\r\n        alert(error.response.data.errors[0])\r\n        this.status.loadingBtn = ''\r\n        window.$('#productModal').modal('hide')\r\n      })\r\n    },\r\n    // 購物車內產品數量計算\r\n    quantityCalc (id, num) {\r\n    // this.status.loadingBtn = id;\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping`\r\n      const data = {\r\n        product: id,\r\n        quantity: num\r\n      }\r\n      this.axios.patch(api, data).then(() => {\r\n        this.isLoading = false\r\n        this.getCart()\r\n        window.$('#productModal').modal('hide')\r\n        // this.status.loadingBtn = '';\r\n      }).catch((error) => {\r\n        this.isLoading = false\r\n        // this.status.loadingBtn = '';\r\n        window.$('#productModal').modal('hide')\r\n        alert(error.response.data.errors[0])\r\n      })\r\n    },\r\n    // 移除購物車內單項產品\r\n    delFromCart (id) {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping/${id}`\r\n      this.axios.delete(api).then(() => {\r\n        this.isLoading = false\r\n        this.getCart()\r\n      })\r\n    },\r\n    // 移除購物車所有內容\r\n    removeCartAll () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/shopping/all/product`\r\n      this.axios.delete(api).then(() => {\r\n        this.isLoading = false\r\n        this.getCart()\r\n      })\r\n    },\r\n    // 完成訂單\r\n    successOrder () {\r\n      this.isLoading = true\r\n      const api = `${process.env.VUE_APP_APIPATH}/${process.env.VUE_APP_UUID}/ec/orders`\r\n      this.axios.post(api, this.form).then((response) => {\r\n        if (response.data.data.id) {\r\n          // this.cartTotal = response.data.data.amount;\r\n          // console.log(this.cartTotal);\r\n          window.$('#successModal').modal('show')\r\n          this.isLoading = false\r\n          this.getCart()\r\n        };\r\n      }).catch((error) => {\r\n        this.isLoading = false\r\n        console.log(error.response.data.message)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n"]}]}